container_commands:
  01_migrate:
    command: "mkdir -p /opt/elasticbeanstalk/hooks/appdeploy/post/ && echo -e '#!/bin/bash\ndocker exec `docker ps -a -q | head -n 1` python /var/app/manage.py migrate' > /opt/elasticbeanstalk/hooks/appdeploy/post/99_migrate.sh && chmod +x /opt/elasticbeanstalk/hooks/appdeploy/post/99_migrate.sh"
    leader_only: true
  02_superuser:
    command: "echo -e '#!/bin/bash\ndocker exec `docker ps -a -q | head -n 1` python /var/app/manage.py superuser' > /tmp/deploy.log"
    leader_only: true
option_settings:
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: "Orpose.settings.production"
  aws:elasticbeanstalk:container:python:
    WSGIPath: Orpose/wsgi.py